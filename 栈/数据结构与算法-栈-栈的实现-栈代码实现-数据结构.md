# 栈

[TOC]

## 一，什么是 栈？

1，后进者先出，先进者后出，经典的 栈 结构 【我们平时放盘子的时候，都是从下往上一个一个放；取的时候，我们也是从上往下一个一个地依次取，不能从中间任意抽出。】

2，从 栈 的操作特性来看，是一种 操作受限 的线性表，只允许 在端插入和 删除数据

## 二，为什么需要栈？栈的特点

1，栈 是一种 操作受限 的数据结构，其操作特性用 数组 和 链表 均可实现

2，但，任何数据结构都是对特定应用的场景，数组 和 链表 虽然使用起来更加灵活，但却 暴露 几乎 所有的操作，难免会引发错误操作的风险

3，使用：当某个 数据集合只 涉及在某端插入和 删除数据，且 满足后 后进者先出，先进者后出的操作特性时，我们应首选栈这种数据结构。

## 三，如何实现栈？

### 1，栈的类型

栈既可以用 数组来实现，也可以用 链表来实现。

用数组实现的栈，叫作 顺序栈，用链表实现的栈，叫作 链式栈。

### 2，数组实现 —— 顺序栈（自动扩容）

时间复杂度：根据均摊复杂度的定义可以得到，顺序栈（自动扩容）大多数情况为 O(1) 复杂度，个别情况为 O(n) 复杂度，比如自动扩容时，会拷贝完整的数据；

空间复杂度：在入栈 和 出栈过程中，只需要 一两个临时变量存储空间 和 一个大小为 n 的数组（必需品），为 O(1) 复杂度。我们说空间复杂度的时候，是指除了原本的数据存储空间外，算法运行还需要额外的存储空间；

### 3，链表实现

时间复杂度分析：压栈和弹栈的时间复杂度 均为 O(1)复杂度 ，因为只需更改单个节点的索引即可。

空间复杂度分析：在入栈和出栈的过程中，只需要一两个临时变量存储空间，所以O(1)级别；我们说空间复杂度的时候，是指除了原本的数据存储空间外，算法运行还需要额外的存储空间；

## 四，栈的应用

### 1，栈 在函数调用中的应用

操作系统给每个线程分配了一个块独立的内存空间，这块内存空间被组织成 栈 这种结构，用来存储函数调用时的临时变量。每进入一个函数，就会将其中的临时变量作为栈帧入栈，当被调用的函数执行完成，返回之后，将这个函数对用的栈帧 出栈。

### 2，栈 在表达式求值中的应用（比如：34 + 13 * 9 + 44 - 12 / 3）

利用两个栈，其中一个用来保存操作数，另一个用来保存运算符。

我们从左向右遍历表达式，当遇到数字，我们就直接压入操作数栈。当遇到运算符，就与运算符栈的栈顶元素进行比较，若比运算符栈顶元素优先级高，就将当前运算符压入栈；若比运算符栈顶元素的优先级低或者相同，从运算符栈中取出栈顶运算符，从操作数栈顶取出2个操作数，然后进行计算，把计算完的结果压入操作数栈，继续比较。

### 3，栈在括号匹配中的应用（比如：{}{\[()]()}）

用栈来保存未匹配的左括号，从左到右依次扫描字符串。当扫描到左括号时，则将其压入栈中；当扫描到右括号时，从栈顶取出一个左括号。如果能够匹配，比如 “（“ 跟 “）”  匹配， “[” 跟 “]” 匹配， “{” 跟 "}”  匹配，则继续扫描剩下的字符串。如果扫描的过程中，遇到不能配对的右括号，或者栈中没有数据，则说明为非法格式。

### 4，如何实现浏览器的 前进后退 功能？

我们使用两个栈X和Y，我们把首次浏览的页面依次压如栈X，当点击后退按钮时，再依次从栈X中出栈，并将出栈的数据一次放入Y栈。当点击前进按钮时，我们依次从栈Y中取出数据，放入栈X中。当栈X中没有数据时，说明没有页面可以继续后退浏览了。当Y栈没有数据，那就说明没有页面可以点击前进浏览了。

## 五，思考

### 1，我们在讲栈的应用时，讲到用函数调用栈来保存临时变量，为什么函数调用要用“栈”来保存临时变量呢？用其他数据结构不行吗？

答：因为函数调用的执行顺序符合后进者先出，先进者后出的特点。

比如函数中的 局部变量的生命周期的长短 是 先定义的生命周期长，后定义的生命周期短；还有函数中调用函数也是这样，先开始执行的函数只有等到内部调用的其他函数执行完毕，该函数才能执行结束。

### 2，我们都知道，JVM 内存管理中有个“堆栈”的概念。栈内存用来存储局部变量和方法调用，堆内存用来存储 Java 中的对象。那 JVM 里面的“栈”跟我们这里说的“栈”是不是一回事呢？如果不是，那它为什么又叫作“栈”呢？

答：JVM里面的栈和我们这里说的是一回事，被称为方法栈。和前面函数调用的作用是一致的，用来存储方法中的局部变量。  

## 六，练习题

leetcode上关于栈的题目大家可以先做20,155,232,844,224,682,496.