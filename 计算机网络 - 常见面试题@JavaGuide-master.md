# 计算机网络 - 常见面试题

[TOC]

文章不是原创，[源文地址](https://github.com/Snailclimb/JavaGuide/blob/master/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%8E%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.md#%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E) 在此。本文有删改。

# 一，OSI 和 TCP/IP 各层的结构 与 功能，都有哪些协议

五层协议的体系结构

这里采用这种的办法：中和 OSI 和 TCP/IP 的优点，采用一种只有五层结构的体系结构，这样即简洁又易于阐述。

![三种不同的体系结构](https://camo.githubusercontent.com/94ac65420edf518aa8059bae10125db1d0a35c81/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f372f32392f313634653533303734373165386562613f773d36333326683d33343426663d706e6726733d313634363233)

结合互联网的情况，自上而下地，简要介绍各层的作用。

## 1，应用层

应用层（application-layer）的任务：通过应用程序间的交互来完成特定网络的应用。

应用层协议定义：应用进程间的通信 和 交互的规则（进程：主机中正在运行的程序）。

对于不同的网络应用需要不同的应用层协议。在互联网中，应用层协议很多，如 域名系统 DNS，支持万维网应用的 HTTP协议，支持电子邮件的 SMTP协议等等。我们把应用层交互的数据单元 称为 报文。

### 域名系统：

```
域名系统是因特网一项核心服务。（Domain Name System：缩写 DNS，Domain Name被译为域名）

它作为可以将域名 和 IP地址 相互映射的一个分布式数据库，能够使人更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。

例子：（from 百度百科）
一个公司的 Web 网站可看作是它在网上的门户，而域名就相当于其门牌地址，通常域名都使用该公司的名称或简称。例如上面提到的微软公司的域名，类似的还有：IBM 公司的域名是 www.ibm.com、Oracle 公司的域名是 www.oracle.com、Cisco 公司的域名是 www.cisco.com 等。
```

### HTTP 协议：

```
超文本传输协议是互联网上应用最为广泛的一种网络协议。（HTTP，HyperText Transfer Protocol)

所有的 WWW（万维网） 文件都必须遵守这个标准。设计 HTTP 最初的目的是为了提供一种发布和接收 HTML 页面的方法。（百度百科）
```

## 2，运输层

运输层（transport layer）的主要任务：负责向 两台主机进程之间 的通信提供 通用的 数据传输服务。应用进程 利用该服务传送应用层报文。

```
通用的：并不针对某一个特定的网络应用，而是多种应用可以使用同一个运输层服务。
```

由于一台主机可同时运行多个线程，因此运输层又复用和分用的功能。

复用：指多个应用层进程可同时使用下面运输层的服务，分用 和  复用相反，是 运输层把收到的信息分别交付给上面应用层的相应进程。

### 运输层主要使用以下两种协议：

1，传输控制协议 TCP（Tranmission Control Protocol）—— 提供 面向连接的，可靠的数据传输服务。

2，用户数据协议 UDP（User Datagram Protocol）—— 提供 无连接的，尽最大努力的数据传输服务（不保证数据传输的可靠性）。

### UDP 的 主要特点：

```
1，UDP 是 无连接的；
2，UDP 使用尽最大努力交付，即不保证可靠交付，因此 主机不需要维持复杂的连接状态；
3，UDP 是 面向报文的；
4，UDP 没有拥塞控制，因此，网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如 直播，实时视频会议等）；
5，UDP 支持 一对一，一对多，多对一 和 多对多的交互通信；
6，UDP 的首部开销小，只有 8个 字节，比如 TCP的20个字节的首部要短。
```

### TCP 的 主要特点：

```
1，TCP 是面向连接的。（通话前需要先 拨号 建立连接，通话结束后要 挂机释放连接；
2，每一条 TCP 连接只能由两个端点，每一条 TCP 连接只能是点对点（一对一）；
3，TCP 提供可靠的交付服务。通过 TCP 连接传送的数据，无差错，不丢失，不重复，按序到达；
4，TCP 提供双全工通信。TCP 允许通信双方的应用进程在任何时候都能发送数据。TCP 连接在两端都设有发送缓存 和 接收缓存，用来临时存放双方通信的数据；
5，面向字节流。TCP 中 流（Stream） ：流入进程 或 从进程流出的字节序列。“面向字节流”的含义是：虽然应用程序和 TCP 的交互是一次一个数据块（大小不等），但 TCP 把应用程序交下来的数据仅仅看成是 一连串的 无结构的 字节流。
```

## 3，网络层

在 计算机网络中进行通信的两个计算机之间 可能会经过很多个数据链路，也可能还要经过很多通信子网。

网络层的任务：选择合适的网间路由 和 交换节点，确保数据及时传送。

在发送数据时，网络层 把 运输层 产生的报文段 或 用户数据报 封装成 分组 和 包 进行传送。

在 TCP/IP 体系结构中，由于网络层使用 IP 协议，因此分组也叫 IP 数据报 ，简称 数据报。

```
注意：
1，不要把运输层的 “用户数据报 UDP ” 和 网络层的“ IP 数据报” 弄混。另外，无论是哪一层的数据单元，都可笼统地用 “分组” 来表示。

2，强调指出，网络层中的 “网络” 二字已经不是我们通常谈到的具体网络，而是指计算机网络体系结构模型中第三层的名称。
```

互联网是由大量的异构（heterogeneous）网络通过路由器（router）相互连接起来的。互联网使用的网络层协议：无连接的网际协议（Intert Prococol）和 许多路由选择协议，因此互联网的网络层也叫做 网际层 或 IP层 。

## 4，数据链路层

数据链路层使用背景：数据链路层（data link layer）通常简称为链路层。两台主机之间的数据传输，总是 在一段一段的链路上 传送的，这就需要使用专门的链路层的协议。 

数据链路层的任务：在两个相邻节点之间传送数据时，数据链路层 把 网络层 交付下来的 IP 数据报 组装成 **帧**，在两个相邻节点间的链路上传送 **帧**。每一帧包括 数据 和 必要的控制信息（如同步信息，地址信息，差错控制等）。

```
帧 中的控制信息作用：
- 在接收数据时，控制信息使接收端能够 知道一个帧从哪个比特开始和到哪个比特结束 。这样，数据链路层在收到一个帧后，就可从中 提取出数据部分，上交给网络层。

- 控制信息 还使接收端能够 检测到所收到的帧中有无差错 。如果发现差错，数据链路层就简单地丢弃这个出了差错的帧，以避免继续在网络中传送下去白白浪费网络资源。

- 如果需要改正数据在链路层传输时出现差错（这就是说，数据链路层不仅要检错，而且还要纠错），那么就要采用可靠性传输协议来纠正出现的差错。
```

## 5，物理层

在物理层上所传送的数据单位是比特。

物理层的任务：实现相邻计算机之间比特流的透明传送，尽可能 屏蔽掉具体传输介质和物理设备的差异。使 其上层的数据链路层 不必考虑 网络 具体的传输介质 是什么。

“透明传送比特流”表示经实际电路传送后的比特流没有发生变化，对传送的比特流来说，这个电路好像是看不见的。

在互联网使用的各种协中最重要和最著名的就是 TCP/IP 两个协议。现在人们经常提到的TCP/IP并 不一定单指 TCP 和 IP 这两个具体的协议，而往往表示互联网所使用的整个 TCP/IP 协议簇。

### 总结一下

上图片，形象化。 

![七层体系结构图](https://camo.githubusercontent.com/b645fda06ec0c409b013418cc7699f5fd9cfad4f/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f372f32392f313634653532393330396630666133333f773d3131323026683d3135383726663d67696626733d323235333235)

>   picture from <https://blog.csdn.net/yaopeng_2005/article/details/7064869>

# 二，TCP 三次握手 和 四次握手**

为了准确无语地把数据送达到目标处，TCP 协议采用了三次握手协议。

### 漫画图解：

![TCP的三次握手](https://camo.githubusercontent.com/484f4f39a6e6bb5f4d6cda6709bff7196a23161b/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f352f382f313633336531323733393635343166313f773d38363426683d34333926663d706e6726733d323236303935)

![TCP三次握手的内容](https://camo.githubusercontent.com/e399530014904f78b9a709a7a8accbbb85755b18/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f352f382f313633336531343233336439353937323f773d35343226683d34323726663d6a70656726733d3135303838)

>   picture from 《图解HTTP》 

### 简单示意：

客户端 —— 发送带有 SYN 标志的数据包 —— 服务端 （一次握手）

服务端 —— 发送带有 SYN/ACK 标志的数据包 —— 客户端 （二次握手）

客户端 —— 发送带有 ACK 标志的数据包 —— 服务端 （三次握手）

### 为什么要三次握手

三次握手的目的：建立可靠的通信信道。何为 通讯？简单来说：数据的发送与接收，而三次握手主要目的：确认双方确认自己与对方的发送与接收是正常的。

第一次握手：Client 什么都不能确认；Server 确认了对方发送正常。

第二次握手：Client 确认了：自己发送、接收正常，对方发送、接收正常；Server 确认了：自己接收正常，对方发送正常。

第三次握手：Client 确认了：自己发送、接收正常，对方发送、接收正常；Server 确认了：自己发送、接收正常，对方发送接收正常。

所以，三次握手就能确认双方收发功能都正常，缺一不可。

### 为什么要传回 SYN

接收端传回发送端所发送的 SYN 目的：为了告诉发送端，我接收到的信息确实就是你发送的信号了。

```
SYN 是 TCP/IP 建立连接时使用的握手信号。

在客户机 和 服务器之间建立正常的 TCP 网络连接时，客户机首先发出一个 SYN 信息，服务端使用 SYN-ACK 应答表示接收到了这个消息，最后 客户机再以 ACK（Acknowledgement）消息响应。这样在客户机和服务器之间才能建立起可靠的 TCP 连接，数据才可以在客户机和服务器之间传递。

ACK（Acknowledgement）：确认字符。在数据通信中，接收端 发给 发送端的一种传输控制字符。它表示确认发来的数据已经接受无误。
```

### 传了 SYN ，为什么还需要 ACK

双方通信无误必须是两者互相发送消息都无误。穿了 SYN，证明 发送方 到 接收方 的通道没有问题，但是 接收方 到 发送方的通道 还需要 ACK 信号进行验证。

![TCP的三次握手-SYN/ACK](https://camo.githubusercontent.com/ae140718e064bf5f444224c9da3cdc2b8cd9f9a6/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f352f382f313633336531363736653261633061333f773d35303026683d33343026663d6a70656726733d3133343036)

### 断开一个 TCP 连接则 需要 “四次挥手”：

客户端 —— 发送一个 FIN，用来 关闭 客户端到服务端的数据传输。

服务端 —— 收到 FIN，它 发回一个  ACK，确认序号为收到的序号 +1。和 SYN 一样，一个 FIN 将占用 一个序号。

服务端 —— 关闭与客户端的连接，发送一个 FIN 给客户端。

客户端 —— 发回 ACK 报文确认，并将确认序号设置为 收到的序号 +1。

### 为什么要四次挥手

任何一方都可以在数据传输结束后发出连接释放的通知，待对方确认后进入 半关闭状态。当 另一方也没有数据在发送的时候，则 发出连接释放的通知，对方确认后就完全关闭 TCP 连接。

举个例子：A 和 B 打电话，通话即将结束后，A 说：我没什么要说的了，B 回答说：我知道了，但是 B 可能还会有要说的话，A 不能 要求 B 跟着自己的节奏结束通话，于是 B 可能又巴拉巴拉说了一通，最后 B 说：我说完了，A 回答：我知道了。这样通话才能算结束。

更具体请看：<https://blog.csdn.net/qzcsu/article/details/72861891>

# 三，TCP 、UDP 协议的区别

![TCP 、UDP 协议的区别](https://camo.githubusercontent.com/409f705f6df8c77c7166e543eefa07c40511a28a/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f31392f313632646235653937653961396530313f696d61676556696577322f302f772f313238302f682f3936302f666f726d61742f776562702f69676e6f72652d6572726f722f31)

UPD 在传送数据之前不需要建立连接，远地主机在收到 UDP 报文之后，不需要给出任何确认。虽然 UDP 不提供可靠交付，但在某些情况下 UDP 却是一种最有效的工作方式（一般用于即时通信），比如 ：QQ 语音，QQ 视频，直播等等。

TCP 提供面向连接的服务。在传送数据之前必须先建立连接，数据传送结束后要释放连接。TCP 不提供广播或多播服务。由于 TCP 要提供可靠的、面向连接的运输服务，这以难以避免增加了了许多开销，如 确认，流量控制，计时器 以及 连接管理 等。这不仅使 协议数据单元的首部增大，还要占用许多处理机器资源。TCP 一般用于文件传输、发送 和 接收邮件，远程登陆等场景。

```
TCP 的可靠体现：在传递数据之前，会有三次握手来建立连接，而且在数据传递时，有确认，窗口，重传，拥塞控制机制，在数据传完后，还会断开连接以节约系统资源。
```

# 四，TCP 协议如何保证可靠传输

1，应用数据被切割成 TCP 认为最合适发送的数据块。

2，TCP 给发送的每一个包进行编号，接收方对数据包进行排序，过后把有序的数据传送给 应用层。

3，校验和：TCP 和 保持它首部 和 数据的检验和。这时一个端到端的检验和，目的是：检测数据在传输过程中的任何变化。如果收到的段的检验有差错，TCP 将 丢弃这个报文段 和 不确认收到此报文段。

4，TCP 的接收端会丢弃重复的数据。

5，流量控制：TCP 连接的每一方 都有固定大小的缓冲空间，TCP的 接收端只允许发送端发送接收端缓冲区能接纳的数据。当接收方来不及处理发送方的数，能提示发送方降低发送速率，防止 包丢失。TCP 使用的流量的控制协议 是 可变大小的滑动窗口协议。（TCP 利用滑动窗口协议实现 流量控制）

6，拥塞控制：当 网络拥塞时，减少数据的发送。

7，停止等待协议：为了实现可靠传输。基本原理：每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组。

超时重传：当 TCP 发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将 重发 这个报文。

## 停止等待协议

为了实现可靠传输。基本原理：每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组；

在停止等待协议中，若接收方收到重分组，就丢弃该分组，但同时还有发送确认；

### 1）无差错情况

![**无差错情况**](https://camo.githubusercontent.com/87a4e3d99e9e650c22572eb8ba3ccf74feb86d30/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166613863333831366139303f773d35313426683d34373326663d706e6726733d39393234)

发送方发送分组，接收方在规定时间内收到，并且回复确认，发送方再次发送

### 2）出现差错情况（超时重传）

![**出现差错情况(超时重传)**](https://camo.githubusercontent.com/b499ea2d7d33b0d69af03f8dbdec2321f811d1a0/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166616566646632343961623f773d39353326683d34383026663d706e6726733d3139313633)

停止等待协议中超时重传：指超过一定时间仍没有收到确认，就重传前面发送的分组（认为刚才发送过的分组丢失了）。因此，每发送完一个分组需要设置一个超时计时器，其重转时间 应比 数据在分组传输的平均往返时间更长一些，这种 自动重传方式常称为 自动重传请求 ARQ。另外，在停止等待协议中若收到重复分组，就丢弃该分组，但 同时还要发送确认。连续 ARQ 协议 可提高信道利用率。发送维持一个发送窗口，凡 位于发送窗口内的分组可连续发送出去，而不需要等待对方确认。接收方一般采用累计确认，对 按序到达 的最后一个分组发送确认，表明这个分组位置的所有分组都已经正确收到了。

### 3）确认丢失和确认迟到

#### 1，确认丢失：确认信息在传输过程中丢失

![确认丢失](https://camo.githubusercontent.com/860937399b9aee59e78044f0c323cb0e24d6f5b7/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166623639343161373136353f773d39313826683d34363126663d706e6726733d3139383431)

当 A 发送 M1 消息，B 收到后，B 向 A 发送了一个 M1 确认消息，但却在传输过程中丢失。而 A 并不知道，在超时计时过后，A 重传 M1 消息，B 再次收到该消息后采取以下两点措施：

-   丢弃 这个重复的M1消息，不向上层交付。

-   向A发送确认消息。（不会认为已经发送过了，就不再发送。A能重传，就证明B的确认消息丢失）。

#### 2，确认迟到：确认消息在传输过程中迟到

![**确认迟到**](https://camo.githubusercontent.com/26a9448d6b1d283bb0490a0c50630f88fde885fa/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166646438353932396536623f773d38393926683d34353026663d706e6726733d3233313635)

A 发送 M1 消息，B 收到并发送确认。A 在 超时时间内没有收到确认消息，A 重传 M1 消息，B 仍然收到并继续发送确认消息（这时B收到了 2份M1）。此时 A 收到了 B 第二次发送的确认消息。再后，A 接着发送其他数据。过了许久，A 收到了 B 第一次发送的 对M1 的确认消息（A也收到了2份确认消息）。处理如下：

-   A 收到重复的确认后，直接丢弃
-   B 收到重复的 M1后，也直接丢弃重复的M1。

### 自动重传请求 ARQ 协议

协议背景：停止等待协议中超时重传：指超过一定时间仍没有收到确认，就重传前面发送的分组（认为刚才发送过的分组丢失了）。这种 自动重传方式常称为 自动重传请求 ARQ。

优点：简单

缺点：信道利用率低

### 连续 ARQ 协议

连续 ARQ 协议可提高信道利用率。发送方维持一个发送窗口，凡位于发送窗口内的分组可以连续发送出去，而不需要等待对方确认。接收方一般采用累计确认，对按序到达的最后一个分组发送确认，表明 到这个分组为止的所有分组 都已经 正确 收到了。

优点：信道利用率高，容易实现，即使确认丢失，也不必重传。

缺点：不能向发送方 详细反映 出接收方 已经正确收到的所有分组 的 信息。比如：送方发送了 5条 消息，中间第三条丢失（3号），这时接收方只能对前两个发送确认。发送方无法知道后三个分组的下落，而只好把后三个全部重传一次。这也叫 Go-Back-N（回退 N），表示需要退回来重传已经发送过的 N 个消息。

### 滑动窗口

1，TCP 利用滑动窗口实现流量控制的机制。

2，滑动窗口（Sliding window）是一种流量控制技术。早期的网络通信中，通信双方不会考虑网络的拥挤情况 而 直接发送数据。由于大家不知道网络堵塞情况，且 同时发送数据，导致中间节点堵塞掉包，谁也发不了数据，所以就有了滑动窗口机制来解决此问题。

3，TCP 中采用滑动窗口来进行传输控制，滑动窗口的大小意味着接收方还有多大的缓冲区可以用于接收数据。发送方可以通过滑动窗口的大小来确定应该发送多少个字节的数据。

当滑动窗口为 0 时，发送方一般不能再发送数据报，但有两种情况除外：一种情况：可以发送紧急数据，例如，允许用户终止在远端机上的运行进程；另一种情况：发送方可以发送一个 1 字节的数据报来通知接收方重新声明它希望接收的下一字节及发送方的滑动窗口大小。

### 流量控制

1，TCP 利用滑动窗口实现流量控制。

2，流量控制：为了控制发送方发送速率，保证接收方来得及接收。

3，接收方发送的确认报文中的窗口字段可以用来控制发送方窗口大小，从而影响发送方的发送速率。将窗口字段设置为 0，则发送方不能发送数据。

### 拥塞控制

拥塞：在某段时间，若对网络中某一资源的需求超过了该资源所能提供的可用部分，网络的性能就要变坏。（供大于需）

拥塞控制出现背景：为了防止过多的数据注入到网络中，这样就可以使网络中的路由器或链路不致过载。

拥塞控制所要做的都有一个前提：网络能够承受现有的网络负荷。

拥塞控制是一个全局性的过程，涉及到所有的主机，所有的路由器，以及与降低网络传输性能有关的所有因素。相反，流量控制往往是点对点通信量的控制，是个端到端的问题。流量控制所要做到的就是抑制发送端发送数据的速率，以便接收端来得及接收。

为了进行拥塞控制，TCP 发送方要维持一个 拥塞窗口（cwnd）的状态变量。拥塞控制窗口的大小取决于网络的拥塞程度，并且动态变化。发送方让自己的发送窗口取为拥塞窗口和接收方的接受窗口中较小的一个。

TCP 的拥塞控制采用了四种算法，有 慢开始 、 拥塞避免 、快重传 和 快恢复。在网络层也可以使路由器采用适当的分组丢弃策略（如 主动队列管理 AQM），以减少网络拥塞的发生。

#### 1，慢开始

慢开始算法的思路：当主机开始发送数据时，如果立即把大量数据字节注入到网络，那么可能会引起网络阻塞，因为现在还不知道网络的实际情况。较好的方法：先探测一下（试验），即由小到大逐渐增大发送窗口，也就是由小到大逐渐增大拥塞窗口数值。cwnd初始值为1，每经过一个传播轮次，cwnd 加倍。 

![cwnd ](https://camo.githubusercontent.com/b6c00ee83a30ceb0ac1abc459a14a6167957b8a9/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31302f313635323334386164613263386664303f773d3130353026683d35363026663d6a70656726733d313132363131)

#### 2，拥塞避免

拥塞避免算法的思路是让 拥塞窗口 cwnd 缓慢增大，即 每经过一个 往返时间RTT 就把发送放的cwnd加1。

#### 3，快重传 和 快恢复

背景：在 TCP/IP 中，快速重传和恢复（fast retransmit and recovery，FRR）是一种拥塞控制算法，它能快速恢复丢失的数据包。

没有 FRR，如果数据包丢失了，TCP 将会使用定时器来要求传输暂停。在暂停的这段时间内，没有新的或复制的数据包被发送。有了 FRR，如果接收机接收到一个不按顺序的数据段，它会立即给发送机发送一个重复确认。如果发送机接收到三个重复确认，它会假定确认件指出的数据段丢失了，并立即重传这些丢失的数据段。

有了 FRR，就不会因为重传时要求的暂停被耽误。当有单独的数据包丢失时，快速重传和恢复（FRR）能最有效地工作。当有多个数据信息包在某一段很短的时间内丢失时，它则不能很有效地工作。 

![快重传 和 快恢复](https://camo.githubusercontent.com/221825b6068e180c2fd6d4909d417bc5c6c8c2b9/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31302f313635323334663033303364313734623f773d3131373426683d36343826663d706e6726733d313039353638)

# 五，在浏览器中输入 url 地址 >> 显示主页的过程（面试常客）

打开一个网页，整个过程会使用哪些协议？上图：

![打开一个网页，整个过程会使用哪些协议？](https://camo.githubusercontent.com/c7261a49ba596af8ab0029960a6507837279864e/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f31392f313632646235653938356161626462653f696d61676556696577322f302f772f313238302f682f3936302f666f726d61742f776562702f69676e6f72652d6572726f722f31)

总体来说，分为以下几个过程：

1，DNS 解析

2，TCP 连接

3，发送HTTP请求

4，服务器处理请求并反hi HTTP 报文

5，连接结束

详细可参考：

-   <https://segmentfault.com/a/1190000006879700>

# 六，状态码

![状态吗](https://camo.githubusercontent.com/a508457c9a5252900e482a8ff8ff527970f8e9db/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f352f382f313633336531396462613237656430303f773d36373326683d32313826663d706e6726733d3732393638)

# 七，各种协议与HTTP协议之间的关系

一般面试官会通过这样的问题来考察你对计算机网络知识体系的理解。

![各种协议与HTTP协议之间的关系](https://camo.githubusercontent.com/797e891dc1fa83f905a18f60554c48b29b954817/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f352f382f313633336561643331366430373731333f773d38343126683d3131393326663d706e6726733d363039353133)

# 八，HTTP 长连接，短链接

在 HTTP/1.0 中默认使用短连接。也就是说，客户端和服务器每进行一次HTTP操作，就建立一次连接，任务结束就中断连接。当客户端浏览器访问的某个HTML或其他类型的Web页中包含有其他的Web资源（如JavaScript文件、图像文件、CSS文件等），每遇到这样一个Web资源，浏览器就会重新建立一个HTTP会话。

而从HTTP/1.1起，默认使用长连接，用以保持连接特性。使用长连接的HTTP协议，会在响应头加入这行代码：

```
Connection:keep-alive
```

在使用长连接的情况下，当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接 不会关闭，客户端再次访问这个服务器时，会 继续使用这一条已经建立的连接。**Keep-Alive 不会永久保持连接，它有一个保持时间**，可以在不同的服务器软件（如Apache）中设定这个时间。实现长连接需要客户端和服务端都支持长连接。

HTTP 协议的 长连接和短连接，实质上是 TCP协议的长连接和短连接。

[《HTTP长连接、短连接究竟是什么？》](https://www.cnblogs.com/gotodsp/p/6366163.html)

# 最后

## 计算机网络常见问题回顾

-   TCP 三次握手 和 四次挥手
-   在浏览器中输入url地址 ->> 显示主页的过程
-   HTTP 和 HTTPS 的区别
-   TCP、UDP 协议 的区别
-   常见的状态码

## 建议

推荐大家看一下 《图解HTTP》 这本书

## 参考

-   <https://blog.csdn.net/qq_16209077/article/details/52718250>
-   <https://blog.csdn.net/zixiaomuwu/article/details/60965466>
-   <https://blog.csdn.net/turn__back/article/details/73743641>

## 备注

所有图片来源于网络，如有侵权，可联系作者。