# Golang 思考 见解

[TOC]

3.24.2019

## 蔡超：入门 Go 语言必须跨越的五个思维误区

https://www.infoq.cn/article/qzrGhlzq_HikN10xC5jC

一、重新思考面向对象程序的设计和实现

类型嵌入并不支持最基本的继承特性：

-   子类替换
-   方法重载（override）

不支持继承，特殊的接口类型，这些都会要求我们重新思考设计和编程实现。

二、改变传统 GC（垃圾收集器）语言的思维模式

在编码时，你要考虑充分指针，提高数据访问效率，减少内存复制并编写 GC 友好的代码。

三、重新思考程序的错误处理机制

Go 的设计者则认为 try-catch-finally 的结构导致异常处理与控制流程的耦合，从而使程序结构发生了混乱。

你必须重新思考错误处理的编程模式，因为这样的代码是 Go 语言中非常常见的。

四、思考和学习使用 CSP 并发模型

Go 语言采用了 CSP 模式，这是一种用于描述两个独立的并发实体通过共享的通讯 Channel（管道）进行通信的并发模型。

-   和 Actor 的直接通讯不同，CSP 模式则是通过 Channel 进行通讯的，更松耦合一些；

-   Go 中 channel 是有容量限制并且独立于处理 Groutine，而如 Erlang，Actor 模式中的 mailbox 容量是无限的，接收进程也总是被动地处理消息。

五、理解 Goroutine 的调度机制

Goroutine 有着和 Java 线程完全不同的调度机制，Java 线程模型中线程和 KSE（Kernel space Entity）是 1:1 的关系，一个用户线程对应一个 KSE。而 Groutine 和 KSE 是多对多的对应关系。虽然，Groutine 的调度机制不如，由内核直接调度的线程机制效率那么高，但是由于 Groutine 间的切换可以不涉及内核级切换，所以代价小很多。

